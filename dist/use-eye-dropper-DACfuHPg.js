import{useRef as e,useEffect as n,useMemo as t,useCallback as r,useState as o}from"react";import{f as u,u as c}from"./use-disclosure-m6NeHj15.js";function i(r){const o=e(r);return n((()=>{o.current=r})),t((()=>(...e)=>{var n;return null==(n=o.current)?void 0:n.call(o,...e)}),[])}function s(t,o){const u=i(t),c=e(0);return n((()=>()=>window.clearTimeout(c.current)),[]),r((()=>{window.clearTimeout(c.current),c.current=window.setTimeout(u,o)}),[u,o])}const d=e=>({x:u(e.x,0,1),y:u(e.y,0,1)});function a(t,r,c="ltr"){const i=e(null),s=e(!1),d=e(!1),a=e(0),[l,m]=o(!1);return n((()=>{s.current=!0}),[]),n((()=>{var e,n;const o=({x:e,y:n})=>{cancelAnimationFrame(a.current),a.current=requestAnimationFrame((()=>{if(s.current&&i.current){i.current.style.userSelect="none";const r=i.current.getBoundingClientRect();if(r.width&&r.height){const o=u((e-r.left)/r.width,0,1);t({x:"ltr"===c?o:1-o,y:u((n-r.top)/r.height,0,1)})}}}))},l=()=>{!d.current&&s.current&&(d.current=!0,"function"==typeof(null==r?void 0:r.onScrubStart)&&r.onScrubStart(),m(!0),document.addEventListener("mousemove",h),document.addEventListener("mouseup",v),document.addEventListener("touchmove",w),document.addEventListener("touchend",v))},v=()=>{d.current&&s.current&&(d.current=!1,m(!1),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",v),setTimeout((()=>{"function"==typeof(null==r?void 0:r.onScrubEnd)&&r.onScrubEnd()}),0))},f=e=>{l(),e.preventDefault(),h(e)},h=e=>o({x:e.clientX,y:e.clientY}),p=e=>{e.cancelable&&e.preventDefault(),l(),w(e)},w=e=>{e.cancelable&&e.preventDefault(),o({x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY})};return null==(e=i.current)||e.addEventListener("mousedown",f),null==(n=i.current)||n.addEventListener("touchstart",p,{passive:!1}),()=>{i.current&&(i.current.removeEventListener("mousedown",f),i.current.removeEventListener("touchstart",p))}}),[c,t]),{ref:i,active:l}}const l={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function m(){const r=e(0),u=e(null),[c,i]=o(l),s=t((()=>"undefined"!=typeof window?new ResizeObserver((e=>{const n=e[0];n&&(cancelAnimationFrame(r.current),r.current=requestAnimationFrame((()=>{u.current&&i(n.contentRect)})))})):null),[]);return n((()=>(u.current&&(null==s||s.observe(u.current)),()=>{null==s||s.disconnect(),r.current&&cancelAnimationFrame(r.current)})),[u.current]),[u,c]}function v(){const[e,{width:n,height:t}]=m();return{ref:e,width:n,height:t}}function f(){const[e,n]=o(!1);c((()=>{n("undefined"!=typeof window&&"EyeDropper"in window)}),[]);const t=r(((n={})=>{if(e){return(new window.EyeDropper).open(n)}return Promise.resolve(void 0)}),[e]);return{supported:e,open:t}}export{i as a,s as b,a as c,d,f as e,m as f,v as u};
